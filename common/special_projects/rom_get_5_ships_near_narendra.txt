namespace = XL_MAP_mission

# RIVALS GETTING TOO CLOSE
special_project = {
	key = "RIVALS_GETTING_TOO_CLOSE"
	cost = 0
	days_to_research = 30
	timelimit = 720
	tech_department = society_technology

	# Dynamic Images (Major Power variants)
	# COUNTRY SCOPE ALWAYS (event_scope = ship_event does not matter)
	picture = {
		trigger = { is_romulan = yes }
		picture = GFX_evt_empire_fleet_romulan
	}
	# Default Image
	picture = GFX_evt_ship_base_pirates
	event_scope = ship_event
	
	delete_on_finish = yes

	location = yes

	requirements = {
		shipclass_military = 1 #4
		#fleet_power = 1000
		#leader = admiral
	}
	
	on_success = {
		# OWNER = {
			ship_event = { id = XL_MAP_mission.0002 }
		# }

		if = {
			limit = { exists = event_target:narendra_star }
			event_target:narendra_star = {
				solar_system = {
					solar_system = {
						save_event_target_as = narendra_system
					}
				}
			}
			ship_event = { id = XL_MAP_mission.0002 } #Triggers Sneak Attack Special Project
			event_target:klingon_country = {
				set_closed_borders = {
					who = event_target:romulan_country
					status = no
					forced = 1
				}
			}
		}
	}
	
	on_fail = {
		if = {
			limit = {
				exists = OWNER
			}
			OWNER = { country_event = { id = mission.86 } }
		}
	}
}

# SNEAK ATTACK ON NARENDRA III
special_project = {
	key = "SNEAK_ATTACK_NARENDRA"
	cost = 0
	days_to_research = 30
	timelimit = 30
	tech_department = society_technology

	# Dynamic Images (Major Power variants)
	# COUNTRY SCOPE ALWAYS (event_scope = ship_event does not matter)
	picture = {
		trigger = { is_romulan = yes }
		picture = GFX_evt_empire_fleet_romulan
	}
	# Default Image
	picture = GFX_evt_ship_base_pirates
	event_scope = ship_event
	
	delete_on_finish = yes

	location = yes

	requirements = {
		shipclass_military = 1 #4
		#fleet_power = 1000
		#leader = admiral
	}
	
	on_success = {
		# event_target:narendra_star = {
		# 	solar_system = {
		# 		any_system_planet = {
		# 			limit = {
		# 				owner = {
		# 					is_klingon = yes
		# 				}
		# 				is_colony = yes
		# 			}
	
		# 			while = {
		# 				count = 5
		# 				random_owned_pop = {
		# 					kill_pop = yes
		# 				}
		# 			}
		# 		}
		# 	}
		# }

		closest_system = {
			limit = {
				any_system_planet = {
					has_planet_flag = planet_narendra
					owner = { is_klingon = yes }
				}
			}
			save_event_target_as = raid_system
		}
		event_target:raid_system = {
			random_system_planet = {
				limit = {
					has_planet_flag = planet_narendra
					owner = { is_klingon = yes }
				}
				save_event_target_as = raid_planet
			}
		}
		event_target:raid_planet = {
			while = {
				count = 5
				random_owned_pop = {
					kill_pop = yes
				}
			}
		}
	}
	
	on_fail = {
		if = {
			limit = {
				exists = OWNER
			}
			OWNER = { country_event = { id = mission.86 } }
		}
	}
}